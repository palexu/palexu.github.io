<h2 id="简介">简介</h2>

<p>本次 JStorm 源码分析文章, 主要是为在公司的内部学习分享会准备的. 
生产环境使用的是 JStorm 2.2.1, 本次介绍的功能也以此为准 ( 本文不会涉及到一些高级特性, 主要还是围绕 Storm 的基本功能展开). 希望阅读本文的童鞋, 最好对 Storm/JStorm 的使用有一定的了解, 知道 Spout、Bolt 的一些基本的工作原理.</p>

<p>如果不太了解, 本文最下方也提供了一些学习资料, 可以先花上半天时间学习一下.</p>

<p>本文主要会介绍以下这些内容:</p>
<ol>
  <li><a href="lean-jstorm-source-code-01">tuple 在整个拓扑中的流动过程</a>
    <ol>
      <li>spout / bolt 如何接受并处理消息, 然后向后发送消息?</li>
      <li>在发给内部的 task 和外部的 task 时, 发送方式有什么区别?</li>
    </ol>
  </li>
  <li>JStorm 如何对这个步骤进行抽象,形成不同的组件(TaskReceiver,TaskTransfer,Task,Executor)</li>
  <li>拓扑如何将这些组件启动?</li>
</ol>

<p>这篇文章不会对着代码一行行介绍每一句代码干了啥, 而是希望从功能的角度出发, 去描述 JStrom 整个系统的架构.</p>

<h2 id="涉及到以下这些方面">涉及到以下这些方面:</h2>

<p>启动、运行流程:</p>
<ul>
  <li>上传拓扑: jstorm Nimbus</li>
  <li>启动 supervisor : SyncSupervisorEvent 实际启动worker的地方</li>
  <li>启动 worker : storm Worker 的启动与运行</li>
  <li>启动 task :storm task的启动与运行</li>
  <li>在 JStrom 中 executor 与 task 之间的关系</li>
</ul>

<p>关键组件:</p>
<ul>
  <li>TaskTransfer/TaskReceiver</li>
  <li><a href="lean-jstorm-AsyncLoopThread">AsyncLoopThread 以及相关的类</a></li>
  <li>SystemBolt</li>
  <li>TopologyContext</li>
  <li>BoltExecutors</li>
</ul>

<p>依赖的库与框架</p>
<ul>
  <li>Metric 用于性能统计</li>
  <li><a href="lean-jstorm-source-queue">LMAX Disruptor 一个高性能队列</a></li>
  <li>Netty 网络通信</li>
  <li>thrift RPC通信</li>
</ul>

<h2 id="参考资料">参考资料</h2>

<h3 id="storm-相关博客和书籍">Storm 相关博客和书籍</h3>
<ol>
  <li><a href="http://storm.apache.org/releases/1.0.6/javadocs/index.html">官方文档 http://storm.apache.org</a></li>
  <li><a href="http://www.infoq.com/cn/news/2014/10/storm-apache-top-level-project">InfoQ:Storm是如何成为Apache顶级项目的</a></li>
  <li><a href="http://www.infoq.com/cn/articles/how-spotify-scales-apache-storm">InfoQ:Spotify如何对Apache Storm进行规模扩展</a></li>
  <li>Storm分布式实时计算模式</li>
  <li>Getting Started with Storm</li>
  <li><a href="http://book.douban.com/subject/26115707/">《Storm源码分析》</a>: 作为工具书在手边备一本，快速看一遍在文档之外多了解一些实现</li>
</ol>

<h3 id="jstorm-相关博客或网页">JStorm 相关博客或网页</h3>
<ol>
  <li><a href="https://github.com/alibaba/jstorm/wiki">JStorm 官方文档 https://github.com/alibaba/jstorm/wiki</a></li>
  <li><a href="https://blog.csdn.net/tjq980303/article/details/81806609">JStorm源码阅读汇总</a> csdn上的博客,可以作为参考</li>
  <li><a href="https://hk.saowen.com/source/site/www_zhenchao_org">JStorm 源码解析</a> 这个博客写得比较详细,不过它还是更多的关注于细节方面,没有对整体架构做一个总体的介绍.</li>
</ol>

